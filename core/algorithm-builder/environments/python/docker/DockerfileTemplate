FROM ${DOCKER_REGISTRY}hkube/base-algorithm-python:v1.0.0
LABEL maintainer="yehiyam@gmail.com"

COPY . /hkube/algorithm-runner
RUN cd /hkube/algorithm-runner
WORKDIR /hkube/algorithm-runner

RUN openssl s_client -connect pypi.org:443
RUN openssl s_client -connect files.pythonhosted.org:443

RUN if [ -f ./algorithm/requirements.txt ]; then echo found requirements.txt; pip3 install -r ./algorithm/requirements.txt; else echo no requirements.txt found; fi 

ENTRYPOINT ["python3"]
CMD ["app.py"]
