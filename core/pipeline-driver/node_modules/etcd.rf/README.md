### ETCD discovery

allows to register and watch registered keys/paths

#### installation
```js
npm install raf-etcd-discovery
```


#### usage

##### init 

```js
const etcdDiscovery = new etcd();
etcdDiscovery.init({ host: '127.0.0.1', port: 4001 })
```

##### register a key
```
the start method used for begin storing data 
 @param {object} options 
 @param {integer}options.ttl  time to live in etcd
 @param {object} options.data  object that need to be stored in etcd if update is needed use update function
 @param {number} options.interval  in wich interval the store is needed 
 @param {string} options.servicePath the path that will be store on etcd from a const file that contains etcd names 
 @param {string} options.instanceId the specific guid the default data is a generated guid
```

```js
 etcdDiscovery.register({ ttl: 10, interval: 1000, servicePath: 'bla/bla', instanceId: '12345', data: { bla: 'bla' } })
```


##### watch

```
 watch notification for messages retruns object with the current value and watch object
 @param {object} options 
 @param {string} options.servicePath the path that will be store on etcd from a const file that contains etcd names 
 @param {string} options.instanceId the specific guid the default data is a generated guid
 @param {any} options.etcdOptions etcd options the default is  {wait: true}

```

```js
  etcdDiscovery.watch({ servicePath: 'ass' }).then(etcd => {
        etcd.watcher.on('set', d => console.log(`set:    ${JSON.stringify(d)}`)) //=> register for each event
        etcd.watcher.on('change', d => console.log(`change: ${JSON.stringify(d)}`)); //=> register for changing data
        etcd.watcher.on('expire', d => console.log(`expire: ${JSON.stringify(d)})`));//=>register for token experation
        etcd.watcher.on('delete', d => console.log(`delete: ${JSON.stringify(d)}`));//=>register for deleted token
    });


```

